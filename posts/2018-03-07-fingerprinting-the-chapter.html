<html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>Fingerprinting the Chapter
</title><base href="/"><link href="/assets/css/spectre.min.css" rel="stylesheet"><link href="//fonts.googleapis.com/css?family=Montserrat|Raleway" rel="stylesheet"><link href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/styles/default.min.css" rel="stylesheet"><link href="/images/favicon.svg" type="image/svg+xml" rel="icon" sizes="any"><style type="text/css">

@media screen and (min-width: 1200px)
{
html
{
  font-size : 23px;
}

}
@media screen and (min-width: 992px)
{
html
{
  font-size : 24px;
}

}
@media screen and (min-width: 768px)
{
html
{
  font-size : 25px;
}

}
@media screen and (min-width: 576px)
{
html
{
  font-size : 27px;
}

}
body
{
  font-family : "Raleway", sans-serif;
}

body.has-docked-nav #main-header
{
  width    : 100%;
  opacity  : 0.94999;
  z-index  : 2;
  position : fixed;
}

#headerWrapper
{
  background-color : #ffffff;
  border-top       : solid 2px #494e8e;
  border-bottom    : solid 2px #494e8e;
}

#headerWrapper header
{
  padding-top    : 0;
  padding-bottom : 0;
  min-height     : 4em;
  margin         : auto auto auto auto;
  max-width      : 65em;
}

#headerWrapper header .nav
{
  flex-direction : row;
}

#headerWrapper header .nav li
{
  margin-top : 0;
}

.container
{
  max-width : 55em;
  padding   : 3em 3em 3em 3em;
}

.header
{
  margin-bottom : 2em;
}

li.pages
{
  list-style-type : none;
  margin-top      : 1em;
}

h1,
h2,
h3,
h4
{
  margin-top : 1em;
}

b
{
  font-size : 1.19999em;
}

main
{
  font-family : "Raleway", sans-serif;
}

main li
{
  list-style-position : outside;
}

.csl-entry
{
  margin-left : 2em;
  text-indent : -2em;
}

figure
{
  text-align : center;
}

figure figcaption
{
  text-align : center;
}

figure img
{
  max-width : 80%;
}


article img
{
  max-width : 80%;
}

span.update p
{
  display : inline;
}

.chip
{
  margin : 0.1rem 0.29999rem 0.1rem 0.29999rem;
}

footer
{
  background-color : #494e8e;
  color            : #fafafa;
}

footer a
{
  color : #ddddec;
}

footer a.icon img
{
  width : 3em;
}

footer .column
{
  display         : flex;
  justify-content : center;
  align-content   : center;
}

footer p
{
  margin-bottom : 0;
}

footer .icons
{
  color      : #fafafa;
  font-size  : 2em;
  display    : flex;
  align-self : center;
}

footer .icons svg:hover
{
  opacity : 0.8;
}

@media screen and (min-width: 576px)
{
footer .icons
{
  flex-direction : column;
}

}
@media screen and (min-width: 992px)
{
footer .icons
{
  flex-direction : row;
}

}
section#greeting
{
  margin-top    : 4em;
  margin-bottom : 2em;
  font-size     : 2em;
}

section#greeting .icons
{
  display         : flex;
  justify-content : space-between;
}

section#greeting .icons img
{
  height     : 4em;
  margin-top : 2em;
}


section#postList li.post
{
  margin-top      : 5em;
  list-style-type : none;
}

section#postList .postTitle
{
  font-size : 2em;
}

@media print
{

html
{
  font-size : 0.9rem;
}

button
{
  display : none;
}

#headerWrapper
{
  display : none;
}

footer
{
  display : none;
}

.container
{
  max-width : none;
  padding   : 0em 0em 0em 0em;
}

table
{
  font-size : 0.8rem;
}

}

/* Generated with Clay, http://fvisser.nl/clay */</style><style type="text/css">@page{margin: 3cm;}</style></head><body><div id="headerWrapper"><header class="navbar"><section class="navbar-section"><a href class="navbar-brand">Jonathan Reeve: <span>Computational Literary Analysis</span></a></section><section class="navbar-section"><ul class="nav"><li class="nav-item"><a href>posts</a></li><li class="nav-item"><a href="cv">cv</a></li><li class="nav-item"><a href="tags">tags</a></li><li class="nav-item"><a href="feed.xml">feed</a></li></ul></section></header></div><div class="container"><h1>Fingerprinting the Chapter
</h1><p>Posted posts/2018-03-07</p><article><p>What is a chapter, really? Inspired by Nicholas Dames’s work on the history of the chapter (<a href="https://www.newyorker.com/books/page-turner/chapter-history">some of which appeared in the <em>New Yorker</em> a few years ago as “The Chapter: A History”</a>), I’ve started investigating this question. We all have an intuition about chapters—how long they should be, their temporal scope, what they generally contain. Most of us, if given a paragraph chosen at random from a novel, could probably tell whether it began a chapter, ended a chapter, or fell somewhere in between. Yet could we say why? Could we explain our intuition to a computer? Sure, if we read a line like “and they rode off into the setting sun” we might guess that it belongs to the end of a chapter. But is the presence of a setting sun a distinguishing criterion for the end of a chapter? Do chapters usually represent a single day in narrative time? I decided to compute the linguistic fingerprint of the chapter, to get closer to understanding what it is.</p>
<p>First, I gathered as many novels as I could. <a href="http://corpus-db.org">Corpus-DB</a>, the <a href="http://jonreeve.com/2017/06/project-gutenberg-the-database/">textual corpus database I’ve been developing</a>, makes it easy to get large numbers of plain text files that match certain categories. At the moment it contains all 50,000 or so texts from Project Gutenberg, and metadata about these books gathered from Wikipedia and other sources. Using this database, I was easily able to assemble corpora of several thousand chaptered novels. I then broke these novels into chapters using two methods. The first, using my tool <a href="https://github.com/JonathanReeve/chapterize">chapterize</a>, reads the plain text files of the novels, looks for markers like “Chapter I” using regular expressions, and divides the novels accordingly. The second leverages hidden metadata in Project Gutenberg HTML files. If you take <a href="https://github.com/GITenberg/Pride-and-Prejudice_1342/blob/master/1342-h/1342-h.htm">a peek at the source code of a Project Gutenberg HTML file</a>, you’ll see named anchors that look like <code class="verbatim">&lt;a name</code>"c2" id=“c2”&gt;=. These IDs correspond to the chapter numbers—in this case, Chapter 2. By counting the number of words of text that occur between these markers, we can measure the chapter lengths of thousands of novels at a time. And by extracting the text that begins and ends these chapters, we can find language patterns that define a chapter’s boundaries. Here are some trends I found.</p>
<h1 id="chapter-statistics">Chapter Statistics</h1>
<p>Figure 1 shows the average number of chapters, the average text length, and the average chapter length for prose fiction works written by authors who were born in the decades shown. There is an amazing range of dates here, indicating the presence of some decidedly non-novelistic classical literature. (Project Gutenberg doesn’t maintain metadata about its texts’ original publication dates, but they do have author birth/death years, strangely, so I’m forced to use those as a proxy. This is a problem I’m trying to correct with Corpus-DB, but my solution isn’t quite ready yet.) This seems to show that by around the 19th Century, chapters are about the same length. They get a little shorter around the 20th Century, and are extreme and erratic before 1700, but I attribute this to the relative paucity of early (pre-1700) and late (post-1920) texts in the corpus, owing to factors like textual availability, canonicity, and copyright restrictions. It appears that novels have been getting shorter, however, and so there are also fewer chapters.</p>
<figure>
<img src="../../../images/chapters/chap-stats-by-author-dob.png" alt="Figure 1: Chapter statistics by author date of birth" /><figcaption aria-hidden="true">Figure 1: Chapter statistics by author date of birth</figcaption>
</figure>
<p>Figure 2 shows the average number of chapters per novel, sorted by the novel’s Library of Congress subject headings. Subjects with the most number of chapters are on the left, and subjects with the least are on the right. There are a few things of note here:</p>
<ol>
<li>The subject with the highest average is 19th Century English fiction, followed by Bildungsromans. Are Bildungsromans so long and chapter-filled because they have to represent the life of a person, rather than just one or two episodes in that person’s life?</li>
<li>“Young men – fiction” is ranked slightly higher than “young women – fiction.”</li>
<li>Civil war novels are ranked higher here than WWI novels. Is this a function of era (20th vs. 19th C), geography, or the nature of the wars themselves?</li>
</ol>
<p>Of course, there are many more things that can be said about this chart. Please feel free to chime in, in the comments below!</p>
<figure>
<img src="../../../images/chapters/numchaps-by-lcsh.png" alt="Figure 2: Average number of chapters by Library of Congress subject heading" /><figcaption aria-hidden="true">Figure 2: Average number of chapters by Library of Congress subject heading</figcaption>
</figure>
<h1 id="language-patterns-of-the-chapter">Language Patterns of the Chapter</h1>
<p>For the next experiment, I extracted the first paragraphs of each chapter from a few thousand novels, as well as middle paragraphs and final paragraphs. From there, I calculated TF-IDF scores for each word. TF-IDF just represents word frequencies, adjusted for the frequencies of those words in the corpus. In this case, it represents term distinctiveness to a paragraph group: how frequently a term occurs in first paragraph of a chapter, for instance, compared with how frequently it occurs in other paragraph categories. Here are the words distinctive of the first paragraphs of chapters:</p>
<blockquote>
<p>morning, early, breakfast, afternoon, summer, autumn, winter, sunday, weather, october, arrival, june, september, saturday, awoke, situated, november, july, season, december</p>
</blockquote>
<p>It seems that the first paragraphs of chapters set the scene: the season, the month, and the time of day (usually the morning). Just for fun, I computed the relative mentions of certain months from this small sample, and found that my intuition was correct: spring is over-represented in the beginnings of chapters, and winter is under-represented, with May as the most mentioned month, and January the least, as shown in Figure 3.</p>
<figure>
<img src="../../../images/chapters/months.png" alt="Figure 3: Months mentioned in the first paragraphs of chapters" /><figcaption aria-hidden="true">Figure 3: Months mentioned in the first paragraphs of chapters</figcaption>
</figure>
<p>Here are the words distinctive of middle paragraphs:</p>
<blockquote>
<p>replied, isn, ve, retorted, aren, hasn, mustn, shouldn, dey, inquired, doesn, haven, ye, wid, fer, wi, em, yer, protested, nothin</p>
</blockquote>
<p>Some of these irregularities are attributable to the tokenizer, which is breaking up contractions in the wrong places, but others are dialect words. This seems to show that dialect—funny-spelled words—is not something that usually starts or ends a chapter. In Dickens, for instance, dialect is usually heard from characters intended to provide some kind of comic relief. These comic characters rarely have a narratorial role, it seems, and rarely bookend chapters.</p>
<p>Finally, here are the words distinctive of last paragraphs:</p>
<blockquote>
<p>pg, kissed, farewell, bye, muttered, parted, disappeared, sank, page, asleep, strode, chapter, kiss, withdrew, homeward, sobbing, thanked, wept, murmured, prayed</p>
</blockquote>
<p>There is a remarkably sad tone here in “sobbing,” “wept,” and “prayed.” Lots of goodbyes are happening here, as well. “Pg” and “page,” seem to be OCR artifacts, but is “chapter” a computing error, or the narrative voice, signaling the end of the chapter?</p>
<p>What do you think defines a chapter? Let me know in the comments.</p>
<h1 id="code">Code</h1>
<p>The code used to generate all this is in <a href="https://github.com/JonathanReeve/chapter-experiments">my GitHub repo called chapter-experiments</a>.</p></article><hr><p>I welcome your comments and annotations in the Hypothes.is sidebar to the right. →</p><script src="https://hypothes.is/embed.js"></script></div><footer><div class="container"><div class="columns"><div class="column col-8"><p>I believe in openness. This work is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>, unless otherwise stated. All content ©Jonathan Reeve 2020. Hand-coded with love, using exclusively free and open-source software, including <a href="https://github.com/srid/rib">Rib</a> and <a href="https://haskell.org/">Haskell</a>. Hosted on <a href="https://github.com">GitHub</a> and served with <a href="https://netlify.com">Netlify</a>. Icons by Nhor, via <a href="https://thenounproject.com">The Noun Project</a>. <a href="https://www.buymeacoffee.com/vaIVQZH">Buy me a coffee</a> or support me <a href="https://liberapay.com/JonathanReeve/donate">via Libera Pay</a> or <a href="bitcoin:3Qvm1DwzFGk3L1Eb6yeg5Nbc6db8sZUnbK">Bitcoin</a>.</p></div><div class="column col-4"><div class="icons"><a href="http://github.com/JonathanReeve"><svg xmlns="http://www.w3.org/2000/svg" height="3em" viewBox="0 0 448 512" fill="#fafafa" width="3em"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48
48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4
1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2
76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7
17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0
0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0
63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8
11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5
18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3
9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6
388 257.4c.1 73.4-44.7 136.3-110.7
158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9
1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3
1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1
1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8
3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6
1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2
3.7 1.3 1.1 1.5 1.1 3.3 0
4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1
1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6
1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"></svg></a><a href="http://twitter.com/j0_0n"><svg xmlns="http://www.w3.org/2000/svg" height="3em" viewBox="0 0 448 512" fill="#fafafa" width="3em"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48
48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2
5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8
15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5
29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447
0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5
24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9
15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></svg></a><a href="mailto:jonathan@jonreeve.com"><svg xmlns="http://www.w3.org/2000/svg" height="3em" viewBox="0 0 448 512" fill="#fafafa" width="3em"><path d="M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48
48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM178.117
262.104C87.429 196.287 88.353 196.121 64 177.167V152c0-13.255 10.745-24
24-24h272c13.255 0 24 10.745 24 24v25.167c-24.371 18.969-23.434 19.124-114.117
84.938-10.5 7.655-31.392 26.12-45.883
25.894-14.503.218-35.367-18.227-45.883-25.895zM384 217.775V360c0 13.255-10.745
24-24 24H88c-13.255 0-24-10.745-24-24V217.775c13.958 10.794 33.329 25.236 95.303
70.214 14.162 10.341 37.975 32.145 64.694 32.01 26.887.134 51.037-22.041
64.72-32.025 61.958-44.965 81.325-59.406 95.283-70.199z"></svg></a></div></div></div><script src="//gc.zgo.at/count.js" async data-goatcounter="https://jonreeve.goatcounter.com/count"></script><script src="/assets/js/jquery-3.5.1.min.js"></script><script src="/assets/js/main.js"></script><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/highlight.min.js"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script><script>hljs.initHighlightingOnLoad();</script></div></footer></body></html>